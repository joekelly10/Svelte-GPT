<script>
    import { createEventDispatcher } from 'svelte'

    const dispatch = createEventDispatcher()

    export let read_only
</script>

<div class='prompt-editor-header'>
    <button class='close-button' on:click={() => dispatch('close')}>
        <img class='close-icon' src='/img/icons/close-white.png' alt='Close'>
    </button>
    <div class='title'>
        {#if read_only}
            <svg class='icon eye-icon' viewBox='0 0 122.88 68.18'><path d='M61.44 13.81a20.31 20.31 0 1 1-14.34 6 20.24 20.24 0 0 1 14.34-6M1.05 31.31a107 107 0 0 1 10.32-10.88C25.74 7.35 42.08.36 59 0s34.09 5.92 50.35 19.32a122 122 0 0 1 12.54 12 4 4 0 0 1 .25 5 79.9 79.9 0 0 1-15.38 16.41 69.53 69.53 0 0 1-43.33 15.45 76 76 0 0 1-44.26-14.36A89.4 89.4 0 0 1 .86 36.44a3.94 3.94 0 0 1 .19-5.13m15.63-5A99 99 0 0 0 9.09 34a81 81 0 0 0 14.62 13.37A68.26 68.26 0 0 0 63.4 60.3a61.7 61.7 0 0 0 38.41-13.72 70.8 70.8 0 0 0 12-12.3 111 111 0 0 0-9.5-8.86C89.56 13.26 74.08 7.58 59.11 7.89s-29.48 6.59-42.43 18.38Zm39.69-7.79a7.87 7.87 0 1 1-7.87 7.87 7.86 7.86 0 0 1 7.87-7.87' style='fill-rule:evenodd'/></svg>
            <div class='title-text'>
                System Prompt<br>
                <span class='subtitle-text'>
                    Read only
                </span>
            </div>
        {:else}
            <svg class='icon edit-icon' viewBox='0 0 106.86 122.88'><g><path d='M46.77,116.58c1.74,0,3.15,1.41,3.15,3.15c0,1.74-1.41,3.15-3.15,3.15H7.33c-2.02,0-3.85-0.82-5.18-2.15 C0.82,119.4,0,117.57,0,115.55V7.33c0-2.02,0.82-3.85,2.15-5.18C3.48,0.82,5.31,0,7.33,0h90.02c2.02,0,3.85,0.83,5.18,2.15 c1.33,1.33,2.15,3.16,2.15,5.18v50.14c0,1.74-1.41,3.15-3.15,3.15c-1.74,0-3.15-1.41-3.15-3.15V7.33c0-0.28-0.12-0.54-0.31-0.72 c-0.19-0.19-0.45-0.31-0.72-0.31H7.33c-0.28,0-0.54,0.12-0.73,0.3C6.42,6.8,6.3,7.05,6.3,7.33v108.21c0,0.28,0.12,0.54,0.31,0.72 c0.19,0.19,0.45,0.31,0.73,0.31H46.77L46.77,116.58z M98.7,74.34c-0.51-0.49-1.1-0.72-1.78-0.71c-0.68,0.01-1.26,0.28-1.74,0.78 l-3.91,4.07l10.97,10.59l3.95-4.11c0.47-0.48,0.67-1.1,0.66-1.78c-0.01-0.67-0.25-1.28-0.73-1.74L98.7,74.34L98.7,74.34z M78.21,114.01c-1.45,0.46-2.89,0.94-4.33,1.41c-1.45,0.48-2.89,0.97-4.33,1.45c-3.41,1.12-5.32,1.74-5.72,1.85 c-0.39,0.12-0.16-1.48,0.7-4.81l2.71-10.45l0,0l20.55-21.38l10.96,10.55L78.21,114.01L78.21,114.01z M31.58,41.08 c-1.74,0-3.15-1.41-3.15-3.15s1.41-3.15,3.15-3.15h41.54c1.74,0,3.15,1.41,3.15,3.15s-1.41,3.15-3.15,3.15H31.58L31.58,41.08z M31.58,85.77c-1.74,0-3.16-1.43-3.16-3.19s1.41-3.19,3.16-3.19h20.47c1.74,0,3.16,1.43,3.16,3.19s-1.41,3.19-3.16,3.19H31.58 L31.58,85.77z M31.58,63.41c-1.74,0-3.15-1.41-3.15-3.15s1.41-3.15,3.15-3.15h41.54c1.74,0,3.15,1.41,3.15,3.15 s-1.41,3.15-3.15,3.15H31.58L31.58,63.41z'/></g></svg>
            <div class='title-text'>
                System Prompt<br>
                <span class='subtitle-text'>
                    Editing
                </span>
            </div>
        {/if}
    </div>
</div>

<style lang='sass'>
    .prompt-editor-header
        display:          flex
        align-items:      center
        justify-content:  center
        position:         fixed
        top:              0
        left:             0
        width:            100%
        box-sizing:       border-box
        padding:          24px 0
        background-color: $background-darkest
        user-select:      none
    
    .title
        display:     flex
        align-items: center
        gap:         16px
        font-weight: 600
        color:       $off-white

        .eye-icon
            height: 13px
            fill:   $off-white
        
        .edit-icon
            height: 21px
            fill:   $off-white
        
        .subtitle-text
            font-size:   14px
            font-weight: 500
            color:       $blue-grey

    .close-button
        position:    absolute
        top:         0
        right:       0
        height:      100%
        box-sizing:  border-box
        padding:     0 space.$default-padding
        font-weight: 500
        cursor:      pointer

        .close-icon
            height: 16px
        
        &:hover
            .close-icon
                filter: brightness(0.8)
</style>
